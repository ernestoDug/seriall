const e=document.querySelector('button[data-action="queue"]');function t(){e.classList.add("filter__button--active"),i.classList.remove("filter__button--active");try{let e=localStorage.getItem("QueueMovies");e&&(e=JSON.parse(e),r(e),s.classList.add("is-hidden"))}catch(e){console.log(e)}}window.addEventListener("load",(()=>t())),e.addEventListener("click",t);const n={adult:!1,backdrop_path:"/bOGkgRGdhrBYJSLpXaxhXVstddV.jpg",genre_ids:[28,12,14,878],id:299536,original_language:"en",original_name:"original_name",overview:"overview",poster_path:"/7WsyChQLEftFiDOVTGkv3hFpyyt.jpg",release_date:"release_date",title:"title",video:!1,vote_average:5.5,vote_count:2023,popularity:666.999},o={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function a(e){return e.map((e=>o[e])).join(", ")}const i=document.querySelector('button[data-action="watched"]'),s=document.querySelector('[data-action="empty"]'),c=document.querySelector('[data-action="list-library"]');function r(e){const t=e.map((({id:e,poster_path:t,genre_ids:n,name:o,first_air_date:i})=>{let s=a(n),c=i?.slice(0,4);return s&&c&&(s+=" | "),o||(o="Назва відсутня"),`\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="${t?"https://image.tmdb.org/t/p/w500"+t:NO_IMAGE}"\n              alt="${o}"\n              id="${e}"\n            />\n            <h3 class="film-card__film-name">${o}</h3>\n            <p class="film-card__genre">${s}${c}</p>\n          </a>\n        </li>\n\t\t`})).join("");c.innerHTML=t}i.addEventListener("click",(function(){e.classList.remove("filter__button--active"),i.classList.add("filter__button--active");try{let e=localStorage.getItem("WatchedMovies");e&&(e=JSON.parse(e),r(e),s.classList.add("is-hidden"))}catch(e){console.log(e)}return}));let l=[];function d(){let e;try{const t=localStorage.getItem("CurrentFilm");e=JSON.parse(t)}catch(e){}if(l=localStorage.getItem("WatchedMovies"),!l)return l=[],l.push(e),u(l);l=JSON.parse(l);return l.find((t=>t.id===e.id))?void 0:(l.push(e),u(l))}function u(e){localStorage.setItem("WatchedMovies",JSON.stringify(e))}let m=[];function h(){let e;try{const t=localStorage.getItem("CurrentFilm");e=JSON.parse(t)}catch(e){}if(m=localStorage.getItem("QueueMovies"),!m)return m=[],m.push(e),v(m);m=JSON.parse(m);return m.find((t=>t.id===e.id))?void 0:(m.push(e),v(m))}function v(e){localStorage.setItem("QueueMovies",JSON.stringify(e))}const _=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},f={gallery:document.querySelector(".js-film-list"),closeBtn:document.querySelector(".js-close"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue"),activLibraryBtn:document.querySelector(".filter__item>.filter__button--active")},p=new class{getRefs(e){const t={};return t.body=document.querySelector("body"),t.modal=document.querySelector(".js-backdrop"),t.modalCloseBtn=document.querySelector(".js-close"),t.posterPath=document.querySelector("#film__poster"),t.title=document.querySelector("#film__title"),t.voteAverage=document.querySelector("#film__vote-average"),t.voteCount=document.querySelector("#film__vote-count"),t.popularity=document.querySelector("#film__popularity"),t.originalTitle=document.querySelector("#film__original-title"),t.genre=document.querySelector("#film__genre"),t.overview=document.querySelector("#film__overview"),t.trailer=document.querySelector("#trailer"),t.filmIinfoWrapper=document.querySelector(".film__info-wrapper"),t}open(){this.refs.modal.classList.remove("is-hidden"),this.refs.body.classList.add("body--modal-open")}close(){this.refs.modal.classList.add("is-hidden"),this.refs.body.classList.remove("body--modal-open")}modifyDataFilm(e=n){this.data=e;const{poster_path:t,name:o,vote_average:i,vote_count:s,popularity:c,original_name:r,genre_ids:l,overview:d,id:u}=this.data;this.refs.posterPath.src=`https://image.tmdb.org/t/p/w500${t}`,this.refs.posterPath.alt=`${o}`,this.refs.title.textContent=`${o}`,this.refs.voteAverage.textContent=`${i}`,this.refs.voteCount.textContent=`${s}`,this.refs.popularity.textContent=`${c}`,this.refs.originalTitle.textContent=`${r}`,this.refs.genre.textContent=`${a(l)}`,this.refs.overview.textContent=`${d}`,null===t&&(this.refs.posterPath.src="https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg"),""===d&&(this.refs.overview.textContent="No information")}get dataFilm(){return this.data}set dataFilm(e){this.data=e}constructor(e){this.refs=this.getRefs(e),this.data=n}};function g(){p.close(),f.closeBtn.removeEventListener("click",g),window.removeEventListener("keydown",y),window.location.reload()}function y(e){"Escape"===e.code&&(p.close(),f.closeBtn.removeEventListener("click",g),window.removeEventListener("keydown",y))}f.gallery.addEventListener("click",(function(e){if(e.preventDefault(),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,_("QueueMovies").concat(_("WatchedMovies")).find((e=>e.id===Number(n))));var n;p.modifyDataFilm(t),p.open(),f.btnWatched.addEventListener("click",(function(){f.btnWatched.classList.contains("watched_send")?(f.btnWatched.textContent="ВИДАЛИТИ З ПЕРЕГЛЯДУ",f.btnWatched.classList.replace("watched_send","watched_remove"),d()):f.btnWatched.classList.contains("watched_remove")&&(f.btnWatched.textContent="ДОДАТИ ДО ПЕРЕГЛЯДУ",f.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),o=n.findIndex((t=>t.id===e.id));n.splice(o,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));f.btnWatched.textContent="ДОДАТИ ДО ПЕРЕГЛЯДУ",f.btnWatched.classList.replace("watched_remove","watched_send")})),f.btnQueue.addEventListener("click",(function(){f.btnQueue.classList.contains("queue_send")?(f.btnQueue.textContent="ВИДАЛИТИ З ЧЕРГИ",f.btnQueue.classList.replace("queue_send","queue_remove"),h()):f.btnQueue.classList.contains("queue_remove")&&(f.btnQueue.textContent="ДОДАТИ В ЧЕРГУ",f.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),o=n.findIndex((t=>t.id===e.id));n.splice(o,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));f.btnQueue.textContent="ДОДАТИ В ЧЕРГУ",f.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(f.btnWatched.classList.replace("watched_send","watched_remove"),f.btnWatched.textContent="REMOVE FROM WATCHED"):(f.btnWatched.classList.replace("watched_remove","watched_send"),f.btnWatched.textContent="ADD TO WATCHED")}catch(e){f.btnWatched.classList.replace("watched_remove","watched_send")}}(t),f.btnWatched.classList.contains("watched_remove")?f.btnWatched.textContent="ВИДАЛИТИ З ПЕРЕГЛЯДУ":f.btnWatched.classList.contains("watched_send")&&(f.btnWatched.textContent="ДОДАТИ ДО ПЕРЕГЛЯДУ");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(f.btnQueue.classList.replace("queue_send","queue_remove"),f.btnQueue.textContent="REMOVE FROM QUEUE"):(f.btnQueue.classList.replace("queue_remove","queue_send"),f.btnQueue.textContent="ADD TO QUEUE")}catch(e){f.btnQueue.classList.replace("queue_remove","queue_send")}})(t),f.btnQueue.classList.contains("queue_remove")?f.btnQueue.textContent="REMOVE FROM QUEUE":f.btnWatched.classList.contains("queue_send")&&(f.btnQueue.textContent="ДОДАТИ В ЧЕРГУ");f.closeBtn.addEventListener("click",g),window.addEventListener("keydown",y)})),f.closeBtn.addEventListener("click",g),window.addEventListener("keydown",y),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&g()}));
//# sourceMappingURL=library.e990cfc0.js.map
